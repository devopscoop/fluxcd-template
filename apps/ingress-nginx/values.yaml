controller:

  # https://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/configmap/
  config:
    allow-snippet-annotations: "true"
    limit-req-status-code: "429"

    # TODO: Why did we enable this once?
    # annotations-risk-level: Critical

  ingressClassResource:
    default: true
  replicaCount: 3
  service:

    # https://kubernetes-sigs.github.io/aws-load-balancer-controller/v2.13/guide/service/annotations/
    annotations:

      # Allegedly the default is "internal", but in my testing, it appears to be "internet-facing" by default.
      # If you have a development cluster, you should uncomment this to make ingresses internal (private) by default.
      # service.beta.kubernetes.io/aws-load-balancer-scheme: "internal"

      # TODO: We used to use this to create NLB load balancers, because that's what was required to expose TCP services, and it was required to capture real IP addresses. I'm not sure if this is still the case.
      # service.beta.kubernetes.io/aws-load-balancer-type: "nlb"

    externalTrafficPolicy: "Local"

  metrics:
    # if this port is changed, change healthz-port: in extraArgs: accordingly
    enabled: true

# Example of how to expose a TCP service
# tcp:
#   55001: "demo-bot/rabbitmq:5672"
